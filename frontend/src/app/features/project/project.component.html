<!-- Scharf Design System - Project View with Tabs -->
<div class="min-h-screen flex">
  <!-- Left Navigation Rail -->
  <nav class="nav-rail flex flex-col items-center py-6 fixed h-full">
    <div class="mb-8">
      <a routerLink="/dashboard" class="font-serif text-2xl text-text-primary">I</a>
    </div>

    <div class="flex-1 flex flex-col items-center space-y-2">
      <a routerLink="/dashboard" class="nav-rail-item" title="Dashboard">
        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5"
            d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6">
          </path>
        </svg>
      </a>
      <a routerLink="/pitches" class="nav-rail-item" title="Pitches">
        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"></path>
        </svg>
      </a>
      <a routerLink="/marketplace" class="nav-rail-item" title="Marketplace">
        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z"></path>
        </svg>
      </a>
      <a routerLink="/profile" class="nav-rail-item" title="Profile">
        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5"
            d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path>
        </svg>
      </a>
    </div>
  </nav>

  <!-- Main Content -->
  <main class="flex-1 ml-rail">
    @if (isLoading()) {
    <div class="flex items-center justify-center h-screen">
      <div class="text-text-muted">Loading project...</div>
    </div>
    } @else if (project()) {
    <!-- Header -->
    <header class="border-b border-brand-border bg-brand-white px-8 py-6">
      <div class="flex justify-between items-center">
        <div>
          <a routerLink="/dashboard" class="text-text-muted text-sm hover:text-text-primary">‚Üê Back to Dashboard</a>
          <h1 class="font-serif text-3xl mt-2 text-text-primary">{{ project()?.title }}</h1>
          @if (project()?.description) {
          <p class="text-text-muted mt-1">{{ project()?.description }}</p>
          }
        </div>
      </div>
    </header>

    <!-- Tab Navigation -->
    <div class="tab-navigation border-b border-brand-border bg-brand-white px-8">
      <button 
        (click)="switchTab('manuscript')" 
        [class.tab-button-active]="activeTab() === 'manuscript'"
        class="tab-button">
        Manuscripts
      </button>
      <button 
        (click)="switchTab('notes')" 
        [class.tab-button-active]="activeTab() === 'notes'"
        class="tab-button">
        Notes
      </button>
      <button 
        (click)="switchTab('review')" 
        [class.tab-button-active]="activeTab() === 'review'"
        class="tab-button">
        Review
      </button>
      <button 
        (click)="switchTab('configure')" 
        [class.tab-button-active]="activeTab() === 'configure'"
        class="tab-button">
        Configure
      </button>
    </div>

    <!-- Tab Content -->
    <div class="h-[calc(100vh-180px)]">
      @switch (activeTab()) {
        @case ('manuscript') {
          <app-manuscript-tab 
            [projectId]="projectId" 
            [documents]="documents()">
          </app-manuscript-tab>
        }
        @case ('notes') {
          <app-notes-tab 
            [projectId]="projectId" 
            [documents]="documents()">
          </app-notes-tab>
        }
        @case ('review') {
          <app-review-tab 
            [pendingProposals]="pendingProposals()" 
            [recentActivity]="recentActivity()"
            [currentUserId]="getCurrentUserId()"
            [isVoting]="isVoting()"
            (voteOnProposal)="voteOnProposal($event.proposalId, $event.voteType)"
            (viewProposalDetails)="viewProposalDetails($event)">
          </app-review-tab>
        }
        @case ('configure') {
          <app-configure-tab 
            [project]="project()" 
            [members]="members()"
            [currentUserId]="getCurrentUserId()"
            (updateProject)="handleUpdateProject($event)"
            (inviteMember)="inviteMember()"
            (removeMember)="removeMember($event)"
            (leaveProject)="handleLeaveProject()"
            (voteToDelete)="handleVoteToDelete()">
          </app-configure-tab>
        }
      }
    </div>
    } @else {
    <div class="flex items-center justify-center h-screen">
      <div class="text-center">
        <h2 class="font-serif text-xl text-text-primary mb-2">Project not found</h2>
        <a routerLink="/dashboard" class="text-text-muted hover:text-text-primary underline">Return to dashboard</a>
      </div>
    </div>
    }
  </main>
</div>